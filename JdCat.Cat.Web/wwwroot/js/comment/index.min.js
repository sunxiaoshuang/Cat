(function(n){"use strict";var t=[{name:"很差",value:1,check:!0},{name:"一般",value:2,check:!0},{name:"满意",value:4,check:!0},{name:"非常满意",value:8,check:!0},{name:"无可挑剔",value:16,check:!0}],u=new Date,f=new Date(u-6048e5),i,r;pageObj.stores&&pageObj.stores.unshift({item1:0,item2:"全部"});i=new Vue({el:"#app",data:{isChain:pageObj.isChain||!1,stores:pageObj.stores,paging:{pageSize:10,pageIndex:1,pageCount:0},businessId:0,delivery:JSON.parse(JSON.stringify(t)),order:JSON.parse(JSON.stringify(t)),startDate:f.format("yyyy-MM-dd"),endDate:u.format("yyyy-MM-dd"),comments:null,stars:JSON.parse(JSON.stringify(t))},methods:{loadData:function(){let i=0,r=0,t=this;this.delivery.some(n=>!n.check)&&this.delivery.forEach(n=>{n.check&&(i+=n.value)});this.order.some(n=>!n.check)&&this.order.forEach(n=>{n.check&&(r+=n.value)});let u={pageIndex:this.paging.pageIndex,pageSize:this.paging.pageSize,deliveryLevel:i,orderLevel:r,startDate:this.startDate,endDate:this.endDate,businessId:this.businessId};axios.get("/comment/getComments?"+n.param(u)).then(function(n){t.paging.pageCount=Math.ceil(n.data.count/t.paging.pageSize);t.comments=n.data.rows}).catch(function(t){n.alert(t)})},next:function(){this.paging.pageIndex>=this.paging.pageCount||(this.paging.pageIndex++,this.loadData())},page:function(n){this.paging.pageIndex!==n&&(this.paging.pageIndex=n,this.loadData())},prev:function(){this.paging.pageIndex<=1||(this.paging.pageIndex--,this.loadData())},search:function(){this.paging.pageIndex=1;this.loadData()},commentText:function(n){var i=t.filter(t=>t.value===n);return i.length===0?"":i[0].name},change:function(t){n.loading();console.log(t);var i=!t.isShow;axios.get(`/comment/changeVisible/${t.id}?visible=${+i}`).then(function(){n.loaded();t.isShow=i})},catOrder:function(t){axios.get(`/Order/OrderDetailView/${t.orderId}`).then(function(t){n.view({template:t.data,title:"订单信息",dialogWidth:800})}).catch(function(t){n.alert(t)})}},created:function(){this.loadData()}});r={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};n("#txtStartDate").datetimepicker(r).on("changeDate",function(){i.startDate=this.value});n("#txtEndDate").datetimepicker(r).on("changeDate",function(){i.endDate=this.value})})(jQuery);