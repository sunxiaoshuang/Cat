(function(n){"use strict";var t={initFunction:function(){t.$menu=n("#main-menu");t.$menu.metisMenu();t.$menu.on("click","a",function(){var i=n(this);i.siblings()[0]||(t.$menu.find("a.active-menu").removeClass("active-menu"),i.addClass("active-menu"))});n(window).bind("load resize",function(){n(this).width()<768?n("div.sidebar-collapse").addClass("collapse"):n("div.sidebar-collapse").removeClass("collapse")})},initialization:function(){t.initFunction()}},i,r,f,u;n(document).ready(function(){t.initFunction();n("#sideNav").click(function(){n(this).hasClass("closed")?(n(".navbar-side").animate({left:"0px"}),n(this).removeClass("closed"),n("#page-wrapper").animate({"margin-left":"260px"})):(n(this).addClass("closed"),n(".navbar-side").animate({left:"-260px"}),n("#page-wrapper").animate({"margin-left":"0px"}))})});i={$frame:n("#mainframe"),defaultUrl:"/product",method:{hashchange:function(){var n=i.defaultUrl;window.location.href.indexOf("#")>-1&&(n=window.location.href.substring(window.location.href.indexOf("#")+1)||"/home/empty");i.$frame.attr("src",n)}}};window.onhashchange=function(){i.method.hashchange()};i.method.hashchange();r=new WebSocket(pageData.orderUrl+"?id="+pageData.business.id);f=document.getElementById("audio-new");r.onmessage=function(n){var t=new Date;u.list.push({code:n.data,time:t.getHours()+":"+t.getMinutes()});f.play()};r.onopen=function(n){console.log("服务已连接",n)};r.onclose=function(t){n.primary(t.reason||"新订单提醒异常，请刷新后重试")};u=new Vue({el:"#msg",data:{list:[]},components:{"cat-order-msg":{data:function(){return{}},methods:{navigate:function(){u.list.remove(this.msg)}},props:["msg"],template:`
                        <li>
                            <a :href="'#/Order?code=' + msg.code" @click="navigate()">
                                <div>
                                    <i class="fa fa-info-circle fa-fw text-primary"></i> 您有一个新订单
                                    <span class="pull-right text-muted small">{{msg.time}}</span>
                                </div>
                            </a>
                        </li>`}}})})(jQuery);