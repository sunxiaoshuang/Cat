(function(n){var t={listItemType:'<div class="list-type-item form-horizontal clearfix new" data-id="{id}">                <label class="pull-left control-label">                    <span>分类名称：<\/span>                <\/label>                <div class="pull-left width-35 margin-right-20 require relative">                    <input type="text" class="form-control" name="name" value="{name}" placeholder="请输入分类名称" />                <\/div>                <div class="pull-left width-20 margin-right-20 require relative">                    <input type="number" value="{sort}" name="sort" class="form-control" placeholder="排序码" />                <\/div>                <label class="pull-left control-label">                    <i class="fa pull-left opr-slide opr-icon absolute fa-remove type-remove" title="删除"><\/i>                <\/label>            <\/div>'};n("#btnType").click(function(){n.view({name:"type",title:"添加类别",url:"/product/addtype",footDisplay:"block"})});n(document).on("click","#btnAddType",function(){var f=n("#txtTypeName").val(),r=n(".list-type"),i=0,e=r.find(":not(div.remove) input[type='number']"),u;return e.each(function(){var t=n(this).val();t=t||0;t=parseInt(t);i<t&&(i=t)}),u=t.listItemType.format({id:0,name:f,sort:i+1}),r.append(u),!1}).on("click","#type .btn-save",function(){var i=n(".list-type"),r=i.find(".list-type-item.new"),u=i.find(".list-type-item.edit"),f=i.find(".list-type-item.remove"),t={add:[],edit:[],remove:[]};return r.each(function(){var i=n(this),r=i.find("input[name='name']").val(),u=i.find("input[name='sort']").val();t.add.push({name:r,sort:u,id:0})}),u.each(function(){var i=n(this),r=i.find("input[name='name']").val(),u=i.find("input[name='sort']").val(),f=i.data("id");t.edit.push({name:r,sort:u,id:f})}),f.each(function(){var i=n(this).data("id");t.remove.push(i)}),n.loading(),n.post("/product/updatetypes",t,function(){n.loaded();n("#type").modal("hide")}),!1}).on("change","input",function(){var i=n(this),t=i.closest(".list-type-item");t.length!==0&&(t.hasClass("new")||t.addClass("edit"))}).on("click","#type .fa-remove",function(){var t=n(this).closest(".list-type-item");if(t.hasClass("new")){t.remove();return}t.removeClass("edit").addClass("remove");t.hide()})})(jQuery);