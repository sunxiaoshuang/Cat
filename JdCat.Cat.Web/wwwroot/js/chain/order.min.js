(function(){pageObj.stores.unshift({item1:0,item2:"全部"});var t={"1":"已付款","2":"已拒单","4":"待配送","8":"待配送","16":"配送中","32":"配送异常","64":"已送达","128":"用户已确认收货","256":"未付款","512":"已评价","1024":"已关闭","2048":"配送已取消","4096":"订单已取消"},n=new Vue({el:"#app",data:{orderList:[],stores:pageObj.stores.map(function(n){return{id:n.item1,name:n.item2}}),selectedItem:0,startDate:pageObj.date,endDate:pageObj.date,buttons:[{name:"全部订单",type:0,selected:!0},{name:"待接单",type:1,selected:!1},{name:"已接单",type:2052,selected:!1},{name:"已关闭",type:1024,selected:!1},{name:"已完成",type:192,selected:!1}],paging:{pageSize:20,pageIndex:1,pageCount:1,recordCount:0},deliveryMode:[{name:"全部",value:99},{name:"外送",value:0},{name:"商家自送",value:1},{name:"自提",value:2}],delivery:99},methods:{getData:function(){var n=this,u=this.buttons.filter(n=>n.selected)[0],t,i,r;if(!this.startDate||!this.endDate){$.alert("请选择订单起止时间");return}if(this.endDate<this.startDate){$.alert("订单开始时间不能大于截止时间");return}if(t=new Date(this.endDate)-new Date(this.startDate),i=t/864e5,i>31){$.alert("订单起止时间间隔必须30天以内");return}r=`pageSize=${pageSize=this.paging.pageSize}&pageIndex=${this.paging.pageIndex}&status=${u.type}&startDate=${this.startDate}&endDate=${this.endDate}&businessId=${this.selectedItem}&delivery=${this.delivery}`;axios.get(`/Chain/GetOrders?${r}`).then(function(t){n.orderList=t.data.list;n.paging.pageCount=t.data.pages;n.paging.recordCount=t.data.rows}).catch(function(n){$.alert(n)})},search:function(){this.initPaging();this.getData()},changeType:function(n){this.buttons.forEach(n=>{n.selected=!1});n.selected=!0;this.curType=n;this.initPaging();this.getData()},initPaging:function(){this.paging.pageIndex=1;this.paging.pageSize=20;this.paging.pageCount=1;this.paging.recordCount=0},nextPage:function(){this.paging.pageIndex>=this.paging.pageCount||(this.paging.pageIndex++,this.getData())},changePage:function(n){this.paging.pageIndex!==n&&(this.paging.pageIndex=n,this.getData())},prevPage:function(){this.paging.pageIndex<=1||(this.paging.pageIndex--,this.getData())},status:function(n){return t[n]}},created:function(){this.initPaging();this.getData()}});$("#txtStartDate").datetimepicker(jdCat.utilData.dateOptions).on("changeDate",function(){n.startDate=this.value});$("#txtEndDate").datetimepicker(jdCat.utilData.dateOptions).on("changeDate",function(){n.endDate=this.value})})();