(function(){pageObj.stores.unshift({item1:0,item2:"全部"});var n=new Vue({el:"#app",data:{report:[],stores:pageObj.stores.map(function(n){return{id:n.item1,name:n.item2}}),selectedItem:0,startDate:pageObj.startDate,endDate:pageObj.endDate},methods:{getData:function(){var n=this,t,i,r;if(!this.startDate||!this.endDate){$.alert("请选择统计时间");return}if(this.endDate<this.startDate){$.alert("订单开始时间不能大于截止时间");return}if(t=new Date(this.endDate)-new Date(this.startDate),i=t/864e5,i>31){$.alert("订单起止时间间隔必须30天以内");return}r=`startDate=${this.startDate}&endDate=${this.endDate}&businessId=${this.selectedItem}`;axios.get(`/Chain/BusinessSummary?${r}`).then(function(t){if(t.data.forEach(function(n){n.amount=+n.amount.toFixed(2)}),n.report=t.data,n.report){var i=0,r=0;n.report.forEach(function(n){i+=n.amount;r+=n.quantity});n.report.push({name:"合计",amount:+i.toFixed(2),quantity:r})}}).catch(function(n){$.alert(n)})}},created:function(){this.getData()}}),t={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};$("#txtStartDate").datetimepicker(t).on("changeDate",function(){n.startDate=this.value});$("#txtEndDate").datetimepicker(t).on("changeDate",function(){n.endDate=this.value})})();