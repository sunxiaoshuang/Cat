(function(){var n=`
        <div class="row form-horizontal">
            <div class="form-group">
                <label class="control-label col-xs-3">
                    <span class="require">名称：</span>
                </label>
                <div class="col-xs-8">
                    <input class="form-control" id="name" />
                </div>
            </div>
        </div>
    `,t=`
        <div class="row form-horizontal">
            <div class="form-group">
                <label class="control-label col-xs-3">
                    <span class="require">排序码：</span>
                </label>
                <div class="col-xs-8">
                    <input class="form-control" type="number" id="sort" />
                </div>
            </div>
        </div>
    `,i=new Vue({el:"#app",data:{items:null},methods:{add:function(){$.view({title:"新增支付方式",template:n,footDisplay:"block",submit:function(){var n=$.trim($("#name").val());if(!n){$.alert("请输入支付名称");return}return axios.post("/tang/addPayment",{name:n}).then(function(n){if(!n.data.success){$.alert(n.data.msg);return}$.alert(n.data.msg,"success");i.items.push(n.data.data)}).catch(function(n){$.alert(n)}),!0}})},modify:function(n){var i=this;$.view({title:"修改支付方式排序码",template:t,footDisplay:"block",submit:function(){var t=$.trim($("#sort").val());if(!t){$.alert("请输入排序码");return}return axios.put(`/tang/setPaymentSort/${n.id}?sort=${t}`).then(function(r){if(!r.data.success){$.alert(r.data.msg);return}$.alert(r.data.msg,"success");n.sort=t;i.items.sort(function(n,t){return n.sort-t.sort})}).catch(function(n){$.alert(n)}),!0}})},remove:function(n){var t=this;$.primary(`确定删除支付方式[${n.name}]吗？`,function(){return axios.delete("/tang/removePayment/"+n.id).then(function(i){if(!i.data.success){$.alert(i.data.msg);return}$.alert(i.data.msg,"success");t.items.remove(n)}).catch(function(n){$.alert(n)}),!0})}},created:function(){var n=this;axios.get("/tang/getPayments").then(function(t){n.items=t.data})}})})();