(function(){var i={"1":"未使用","2":"已使用","3":"已过期","4":"上架","5":"下架","6":"已领完","7":"未开始"},n=new Vue({el:"#app",data:{list:pageData.list,statusList:[{name:"--优惠券状态--",value:"0"},{name:"上架",value:"4"},{name:"下架",value:"5"},{name:"未开始",value:"7"},{name:"已过期",value:"3"},{name:"已领完",value:"6"}],status:"0"},methods:{validFilter:function(n){return n.validDay>0?"领取后"+n.validDay+"天":n.startDate.substring(0,10)+" 至 "+n.endDate.substring(0,10)},remove:function(n){var t=this;$.primary("确定删除吗？",function(){return axios.delete("/Sale/DeleteCoupon/"+n.id).then(function(i){if(!i.data.success){$.alert(i.data.msg);return}$.alert(i.data.msg,"success");t.list.remove(n);var r=pageData.list.filter(t=>t.id==n.id)[0];pageData.list.remove(r)}).catch(function(n){$.alert(n)}),!0})},down:function(n){var t=this;$.primary("下架后将无法复原，确定吗？",function(){return axios.get("/Sale/DownCoupon/"+n.id).then(function(t){if(!t.data.success){$.alert(t.data.msg);return}$.alert(t.data.msg,"success");n.isActive=!1;n.status="5"}).catch(function(n){$.alert(n)}),!0})},statusFilter:function(n){return i[n]}},watch:{status:function(){var n=this;if(this.status==0){this.list=pageData.list;return}this.list=pageData.list.filter(t=>t.status==n.status)}}}),t={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};$("#txtStartDate").datetimepicker(t).on("changeDate",function(){n.entity.startDate=this.value});$("#txtEndDate").datetimepicker(t).on("changeDate",function(){n.entity.endDate=this.value})})();