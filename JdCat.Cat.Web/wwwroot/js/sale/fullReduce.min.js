(function(){var n=new Vue({el:"#app",data:{entity:pageData.entity||{name:"",startDate:"",endDate:"",isForeverValid:!1,minPrice:0,reduceMoney:0},showError:!1,btnDisplay:!1},methods:{create:function(){var n=this.entity,t=this,i;if(!n.name||!n.minPrice||!n.reduceMoney){$.alert("请将信息输入完整");t.showError=!0;return}if(!n.isForeverValid&&(!n.startDate||!n.endDate)){$.alert("请输入活动日期或选择永久有效");t.showError=!0;return}if(n.endDate<n.startDate){$.alert("截止日期不能小于起始日期");t.showError=!0;return}t.showError=!1;t.btnDisplay=!0;i=n.id?"/Sale/UpdateFullReduce":"/Sale/CreateFullReduce";$.loading();axios.post(i,n).then(function(n){if($.loaded(),!n.data.success){$.alert(n.data.msg);t.btnDisplay=!1;return}$.alert(n.data.msg,"success");setTimeout(function(){window.location="/Sale/FullReduceList"},2e3)}).catch(function(n){$.loaded();$.alert(n);t.btnDisplay=!1})},ret:function(){history.go(-1)}},filters:{date:function(n){return n?n.substring(0,10):""}}}),t={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};$("#txtStartDate").datetimepicker(t).on("changeDate",function(){n.entity.startDate=this.value});$("#txtEndDate").datetimepicker(t).on("changeDate",function(){n.entity.endDate=this.value})})();