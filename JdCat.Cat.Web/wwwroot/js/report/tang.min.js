(function(){Vue.prototype.currency=function(n){return"￥ "+ +n.toFixed(2)};var n=new Vue({el:"#app",data:{list:[],start:undefined,end:undefined,quantity:0,goodAmount:0,actualGoodAmount:0,mealFee:0,goodDiscountAmount:0,orderDiscountAmount:0,preferentialAmount:0,amount:0,actualAmount:0},methods:{search:function(){var n=this,t=+new Date(this.start),i=+new Date(this.end);if(t>i){$.alert("开始时间必须大于结束时间");return}if(t+26784e5<i){$.alert("起止时间跨度最大为31天");return}this.clearTotal();axios.get(`/Report/GetTangData?start=${this.start}&end=${this.end}`).then(function(t){n.list=t.data;n.list.forEach(t=>{n.quantity+=t.quantity,n.goodAmount+=t.goodAmount,n.actualGoodAmount+=t.actualGoodAmount,n.mealFee+=t.mealFee,n.goodDiscountAmount+=t.goodDiscountAmount,n.orderDiscountAmount+=t.orderDiscountAmount,n.preferentialAmount+=t.preferentialAmount,n.amount+=t.amount,n.actualAmount+=t.actualAmount})}).catch(function(n){$.alert(n)})},clearTotal:function(){this.quantity=this.goodAmount=this.actualGoodAmount=this.mealFee=this.goodDiscountAmount=this.preferentialAmount=this.activityAmount=this.amount=this.actualAmount=0},report:function(){window.open(`/Report/ExportTangData?start=${this.start}&end=${this.end}`)}},created:function(){this.start=$("#txtStartDate").val();this.end=$("#txtEndDate").val();this.search()}}),t={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};$("#txtStartDate").datetimepicker(t).on("changeDate",function(){n.start=this.value});$("#txtEndDate").datetimepicker(t).on("changeDate",function(){n.end=this.value})})();