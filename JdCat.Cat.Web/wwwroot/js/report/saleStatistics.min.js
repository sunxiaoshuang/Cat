(function(){var n,t;Vue.prototype.currency=function(n){return"￥ "+n};n=new Vue({el:"#app",data:{price:pageData.list.length>0?+pageData.list[pageData.list.length-1].price.toFixed(2):0,todayQuantity:pageData.list.length>0?pageData.list[pageData.list.length-1].quantity:0,list:[],start:undefined,end:undefined,productOriginalAmount:0,productAmount:0,freightAmount:0,packageAmount:0,discountAmount:0,activityAmount:0,benefitAmount:0,quantity:0,total:0,actualTotal:0},methods:{search:function(){var n=this,t=+new Date(this.start),i=+new Date(this.end);if(t>i){$.alert("开始时间必须大于结束时间");return}if(t+26784e5<i){$.alert("起止时间跨度最大为31天");return}axios.get(`/Report/GetSaleStatistics?start=${this.start}&end=${this.end}`).then(function(t){n.list=t.data;n.total=0;n.quantity=0;n.list.forEach(t=>{n.quantity+=t.quantity,n.productOriginalAmount+=t.productOriginalAmount,n.productAmount+=t.productAmount,n.freightAmount+=t.freightAmount,n.packageAmount+=t.packageAmount,n.discountAmount+=t.discountAmount,n.activityAmount+=t.activityAmount,n.benefitAmount+=t.benefitAmount,n.total+=t.total,n.actualTotal+=t.actualTotal,t.productOriginalAmount=+t.productOriginalAmount.toFixed(2),t.productAmount=+t.productAmount.toFixed(2),t.freightAmount=+t.freightAmount.toFixed(2),t.discountAmount=+t.discountAmount.toFixed(2),t.activityAmount=+t.activityAmount.toFixed(2),t.benefitAmount=+t.benefitAmount.toFixed(2),t.total=+t.total.toFixed(2),t.actualTotal=+t.actualTotal.toFixed(2)});n.quantity=+n.quantity.toFixed(2);n.productOriginalAmount=+n.productOriginalAmount.toFixed(2);n.productAmount=+n.productAmount.toFixed(2);n.freightAmount=+n.freightAmount.toFixed(2);n.packageAmount=+n.packageAmount.toFixed(2);n.discountAmount=+n.discountAmount.toFixed(2);n.activityAmount=+n.activityAmount.toFixed(2);n.benefitAmount=+n.benefitAmount.toFixed(2);n.total=+n.total.toFixed(2);n.actualTotal=+n.actualTotal.toFixed(2)}).catch(function(n){$.alert(n)})},report:function(){window.open(`/Report/ExportSaleStatistics?start=${this.start}&end=${this.end}`)}},created:function(){this.start=$("#txtStartDate").val();this.end=$("#txtEndDate").val();this.search()}}),function(){var n=pageData.list.map(n=>n.createTime.substring(5)),t=pageData.list.map(n=>+n.price.toFixed(2)),i={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"营业额",type:"bar",barWidth:"60%",data:t}]},r=echarts.init(document.getElementById("chart"));r.setOption(i)}();t={format:"yyyy-mm-dd",autoclose:!0,maxView:1,minView:2,todayBtn:!0,todayHighlight:!0,language:"zh-CN"};$("#txtStartDate").datetimepicker(t).on("changeDate",function(){n.start=this.value});$("#txtEndDate").datetimepicker(t).on("changeDate",function(){n.end=this.value})})();