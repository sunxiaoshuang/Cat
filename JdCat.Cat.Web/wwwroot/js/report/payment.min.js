(function(){var n=jdCat.utilMethods.now(),t=new Vue({el:"#app",data:{items:[],orders:[],start:n,end:n},methods:{search:function(){this.loadData()},cat:function(n,t){if(!n.selected&&t!==this.items.length-1){var i=this;this.items.forEach(function(n){n.selected=!1});n.selected=!0;$.loading();axios.get(`/report/getSinglePaymentData?id=${n.id}&start=${this.start}&end=${this.end}`).then(function(n){$.loaded();i.orders=n.data}).catch(function(n){$.alert(n)})}},loadData:function(){var n=this,t=jdCat.utilMethods.diffDay(this.start,this.end);if(t>31){$.alert("查询时间间隔请不要超过31天");return}axios.get(`/report/getPaymentData?start=${this.start}&end=${this.end}`).then(function(t){var i={name:"合计",quantity:0,amount:0,orderAmount:0};n.items=t.data.map(function(n){return n.selected=!1,i.amount+=n.amount,i.orderAmount+=n.orderAmount,i.quantity+=n.quantity,n});n.items.push(i)}).catch(function(n){$.alert(n)})},exportData:function(){location=`/report/exportPaymentData?start=${this.start}&end=${this.end}`},info:function(n){$.view({title:"订单详情",url:`/Store/OrderDetail/${n.id}`,dialogWidth:700})}},created:function(){this.loadData()}});$("#txtStartDate").datetimepicker(jdCat.utilData.dateOptions).on("changeDate",function(){t.start=this.value});$("#txtEndDate").datetimepicker(jdCat.utilData.dateOptions).on("changeDate",function(){t.end=this.value})})();